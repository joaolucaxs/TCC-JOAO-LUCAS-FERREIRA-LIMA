<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="stylesheet" href="/css/styleMontagem.css">
	<script src="/js/montagem.js"></script>
	<title>Montagem</title>
</head>

<body>
	<form th:action="@{/apresentacoes/criarApresentacao/montagem}" method="post" id="apresentacaoForm">
		<div class="d-flex flex-row justify-content-between">

			<div>
			</div>
			<div>
			</div>

			<!-- Contêiner da montagem -->
			<div class="phone">
				<div class="screen" id="phoneContent">
					<div class="presentation-content">
						<div class="media-containers" id="mediaContainers">

							<div id="dropArea" class="media-container droppable" ondrop="drop(event)"
								ondragover="allowDrop(event)" ondragenter="dragEnter(event)"
								ondragleave="dragLeave(event)">
								<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
									data-bs-target="#offcanvasMidia" aria-controls="offcanvasMidia">Adicionar Mídia
								</button>
							</div>

							<div id="dropArea" class="media-container droppable" ondrop="drop(event)"
								ondragover="allowDrop(event)" ondragenter="dragEnter(event)"
								ondragleave="dragLeave(event)">
								<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
									data-bs-target="#offcanvasMidia" aria-controls="offcanvasMidia">Adicionar Mídia
								</button>
							</div>

						</div>
						<button class="btn btn-primary" type="button" onclick="addMediaContainer()">+</button>
					</div>
				</div>
			</div>


			<div class="d-flex flex-column justify-content-center">
				<button class="btn btn-primary mb-2" type="submit"
					onclick="preencherConteudo(); document.getElementById('apresentacaoForm').submit();">Salvar
					Apresentação</button>
				<a class="btn btn-danger mb-2 " href="/apresentacoes" role="button">Cancelar</a>
			</div>

			<input type="hidden" name="phoneContent" id="phoneContentInput">

			<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
				id="offcanvasMidia" aria-labelledby="offcanvasMidiaLabel">
				<div class="offcanvas-header">
					<h5 class="offcanvas-title" id="offcanvasMidiaLabel">Mídias Disponíveis</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<div class="d-flex flex-column justify-content-center">
						<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
							data-bs-target="#offcanvasImagens" aria-controls="offcanvasImagens">Imagens</button>

						<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
							data-bs-target="#offcanvasVideos" aria-controls="offcanvasVideos">Videos</button>

						<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
							data-bs-target="#offcanvasAudios" aria-controls="offcanvasAudios">Audios</button>

						<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
							data-bs-target="#offcanvasTextos" aria-controls="offcanvasTextos">Textos</button>

						<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
							data-bs-target="#offcanvasApresentacoes"
							aria-controls="offcanvasApresentacoes">Apresentações</button>
					</div>
				</div>
			</div>

		</div>
	</form>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasImagens" aria-labelledby="offcanvasImagensLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasImagensLabel">Imagens Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-wrap justify-content-around align-items-center mb-4">
				<div class="p-1">
					<h6>Filtrar por Obra:</h6>
				</div>
				<div class="p-1 col-md-7">
					<select class="form-select" id="obraSelectimagens" onchange="filtrarMidias('imagens')">
						<option value="">Todas as imagens</option>
						<option th:each="peca : ${pecas}" th:value="${peca.tituloPeca}" th:text="${peca.tituloPeca}">
						</option>
					</select>
				</div>
			</div>

			<div class="d-flex flex-column justify-content-center" id="imagensContainer">
				<div class="row row-cols-1 row-cols-md-2 g-4">
					<div class="col imagens" th:each="imagem : ${imagens}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100" draggable="true"
							ondragstart="drag(event)">
							<img th:src="@{/arquivos/visualizar/{id}(id=${imagem.getId()})}" class="img-fluid mb-4"
								id="imagens" alt="Imagem">
							<div class="card-body">
								<h5 class="card-title text-center text-decoration-none"
									data-th-text="${imagem.getNomeArquivo()}"></h5>
								<h5 class="card-title text-center mb-4 text-decoration-none"
									data-th-text="${imagem.getPeca().getTituloPeca()}"></h5>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasVideos" aria-labelledby="offcanvasVideosLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasVideosLabel">Videos Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-wrap justify-content-around align-items-center mb-4">
				<div class="p-1">
					<h6>Filtrar por Obra:</h6>
				</div>
				<div class="p-1 col-md-7">
					<select class="form-select" id="obraSelectvideos" onchange="filtrarMidias('videos')">
						<option value="">Todos os Vídeos</option>
						<option th:each="peca : ${pecas}" th:value="${peca.tituloPeca}" th:text="${peca.tituloPeca}">
						</option>
					</select>
				</div>
			</div>
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-1 row-cols-md-1 g-4">
					<div class="col videos" th:each="video : ${videos}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100">
							<video class="mb-4" id="capa-video" draggable="true" ondragstart="drag(event)" controls>
								<source th:src="@{/arquivos/visualizar/{id}(id=${video.getId()})}" type="video/mp4">
							</video>
							<div class="card-body">
								<h5 class="card-title text-center text-decoration-none"
									data-th-text="${video.getNomeArquivo()}"></h5>
								<h5 class="card-title text-center mb-4 text-decoration-none"
									data-th-text="${video.getPeca().getTituloPeca()}"></h5>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasAudios" aria-labelledby="offcanvasAudiosLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasAudiosLabel">Audios Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-wrap justify-content-around align-items-center mb-4">
				<div class="p-1">
					<h6>Filtrar por Obra:</h6>
				</div>
				<div class="p-1 col-md-7">
					<select class="form-select" id="obraSelectaudios" onchange="filtrarMidias('audios')">
						<option value="">Todos os Áudios</option>
						<option th:each="peca : ${pecas}" th:value="${peca.tituloPeca}" th:text="${peca.tituloPeca}">
						</option>
					</select>
				</div>
			</div>
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-2 row-cols-md-1 g-4">
					<div class="col audios" data-th-each="audio : ${audios}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100">
							<audio class="mb-4" width="100%" height="auto" draggable="true" ondragstart="drag(event)"
								controls>
								<source th:src="@{/arquivos/visualizar/{id}(id=${audio.getId()})}" type="audio/mpeg">
							</audio>
							<div class="card-body">
								<h5 class="card-title text-center text-decoration-none"
									data-th-text="${audio.getNomeArquivo()}"></h5>
								<h5 class="card-title text-center mb-4 text-decoration-none"
									data-th-text="${audio.getPeca().getTituloPeca()}"></h5>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasApresentacoes" aria-labelledby="offcanvasApresentacoesLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasApresentacoesLabel">Apresentações Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-1 row-cols-md-1 g-4">
					<div class="col apresentacoes" th:each="apresentacao : ${apresentacoes}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100 apresentacoes-relacionadas"
							draggable="true" ondragstart="drag(event)">
							<div class="d-flex justify-content-center align-items-center h-100" draggable="false">
								<img th:src="${'data:image/*;base64,' + apresentacao.getImagemCapa().getImagemBinaryStr()}"
									class="p-3 img-fluid" id="imagem-apresentacao" alt="Imagem da Capa"
									draggable="false">
							</div>
							<div class="card-body">
								<a th:href="@{'/apresentacoes/'+${apresentacao.getId()}}" class="disabled-link"
									target="_blank" id="link-apresentacao">
									<h4 class="card-title text-center mb-4 text-decoration-none"
										data-th-text="${apresentacao.getTituloApresentacao()}" id="titulo-apresentacao">
									</h4>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasTextos" aria-labelledby="offcanvasTextosLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasTextosLabel">Inserir um</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-2 row-cols-md-1 g-4">
					<h1 class="draggable editable" draggable="true" ondragstart="drag(event)">Título</h1>
					<h3 class="draggable editable" draggable="true" ondragstart="drag(event)">Sub-Título</h3>
					<p class="draggable editable" draggable="true" ondragstart="drag(event)">Parágrafo</p>
					<b class="draggable editable" draggable="true" ondragstart="drag(event)">Negrito</b>
					<big class="draggable editable" draggable="true" ondragstart="drag(event)">Texto Grande</big>
					<em class="draggable editable" draggable="true" ondragstart="drag(event)">Itálico</em>
					<blockquote class="draggable editable" draggable="true" ondragstart="drag(event)">Citação Longa
					</blockquote>
					<q class="draggable editable" draggable="true" ondragstart="drag(event)">Citação Curta</q>
					<a id="linkTexto" class="draggable editable" draggable="true" ondragstart="drag(event)"
						target="_blank">Link</a>
					<del class="draggable editable" draggable="true" ondragstart="drag(event)">Deletar</del>
					<u class="draggable editable" draggable="true" ondragstart="drag(event)">Sublinhado</u>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="addUrlModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="modalDeletarLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="staticBackdropLabel">Digite a URL deste link:</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="mb-3">
						<textarea class="form-control" id="message-text"></textarea>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-bs-dismiss="modal"
						onclick="updateLink()">Ok</button>
				</div>
			</div>
		</div>
	</div>



	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
		integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
		crossorigin="anonymous"></script>

</body>

</html>