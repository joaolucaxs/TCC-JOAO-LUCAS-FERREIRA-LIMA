<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="stylesheet" href="/css/styleMontagem.css">
	<title>Montagem</title>
</head>

<body>
	<div class="d-flex flex-row justify-content-between">

		<div>
		</div>
		<div>
		</div>
		<!-- Contêiner da montagem -->
		<div class="phone">
			<div class="screen">
				<div class="presentation-content">
					<input type="text" class="presentation-title" placeholder="Digite o título da apresentação">
					<div class="media-containers" id="mediaContainers">
						<div id="dropArea" class="media-container droppable" ondrop="drop(event)"
							ondragover="allowDrop(event)">
							<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
								data-bs-target="#offcanvasMidia" aria-controls="offcanvasMidia">Adicionar Mídia
							</button>
						</div>
						<div id="dropArea" class="media-container droppable" ondrop="drop(event)"
							ondragover="allowDrop(event)">
							<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
								data-bs-target="#offcanvasMidia" aria-controls="offcanvasMidia">Adicionar Mídia
							</button>
						</div>
					</div>
					<button class="btn btn-primary" onclick="addMediaContainer()">+</button>
				</div>
			</div>
		</div>


		<div class="d-flex flex-column justify-content-center">
			<button class="btn btn-primary mb-2" type="submit" id="salvarApresentacao">Salvar
				Apresentação</button>
			<a class="btn btn-danger mb-2 " href="/apresentacoes" role="button">Cancelar</a>
		</div>

		<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
			id="offcanvasMidia" aria-labelledby="offcanvasMidiaLabel">
			<div class="offcanvas-header">
				<h5 class="offcanvas-title" id="offcanvasMidiaLabel">Mídias Disponíveis</h5>
				<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
			</div>
			<div class="offcanvas-body">
				<div class="d-flex flex-column justify-content-center">
					<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
						data-bs-target="#offcanvasImagens" aria-controls="offcanvasImagens">Imagens</button>

					<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
						data-bs-target="#offcanvasVideos" aria-controls="offcanvasVideos">Videos</button>

					<button class="btn btn-primary mb-3" type="button" data-bs-toggle="offcanvas"
						data-bs-target="#offcanvasAudios" aria-controls="offcanvasAudios">Audios</button>

					<button class="btn btn-primary mb-3" data-bs-target="#modalTextos"
						data-bs-toggle="modal">Textos</button>
					<button class="btn btn-primary mb-3" data-bs-target="#modalLinks"
						data-bs-toggle="modal">Links</button>
				</div>
			</div>
		</div>

	</div>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasImagens" aria-labelledby="offcanvasImagensLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasImagensLabel">Imagens Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-1 row-cols-md-2 g-4">
					<div class="col" th:each="imagem : ${imagens}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100"
							draggable="true" ondragstart="drag(event)">
							<img th:src="@{/arquivos/visualizar/{id}(id=${imagem.getId()})}" class="img-fluid"
								id="imagens" alt="Imagem">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasVideos" aria-labelledby="offcanvasVideosLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasVideosLabel">Videos Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-1 row-cols-md-1 g-4">
					<div class="col" data-th-each="video : ${videos}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100">
							<video id="capa-video" draggable="true" ondragstart="drag(event)"
								controls>
								<source th:src="@{/arquivos/visualizar/{id}(id=${video.getId()})}" type="video/mp4">
							</video>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
		id="offcanvasAudios" aria-labelledby="offcanvasAudiosLabel">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title" id="offcanvasAudiosLabel">Audios Disponíveis</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body">
			<div class="d-flex flex-column justify-content-center">
				<div class="row row-cols-2 row-cols-md-1 g-4">
					<div class="col" data-th-each="audio : ${audios}">
						<div class="d-flex flex-column justify-content-center align-items-center h-100">
							<audio width="100%" height="auto" draggable="true"
								ondragstart="drag(event)" controls>
								<source th:src="@{/arquivos/visualizar/{id}(id=${audio.getId()})}" type="audio/mpeg">
							</audio>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
		integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
		crossorigin="anonymous"></script>

	<script>
		function addMediaContainer() {
			var mediaContainers = document.getElementById('mediaContainers');
			var newMediaContainer = document.createElement('div');
			newMediaContainer.classList.add('media-container', 'droppable');
			newMediaContainer.setAttribute('id', 'dropArea');
			newMediaContainer.ondrop = function (event) {drop(event)};
			newMediaContainer.ondragover = function (event) {allowDrop(event)};
			newMediaContainer.innerHTML = '<button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"' +
				'data-bs-target="#offcanvasMidia" aria-controls="offcanvasMidia" >' +
				'Adicionar Mídia </button >';
			mediaContainers.appendChild(newMediaContainer);
		}

		function allowDrop(event) {
			event.preventDefault();
		}

		function drag(event) {
			var draggedElement = event.target;
			var clone = draggedElement.cloneNode(true);
			event.dataTransfer.setDragImage(clone, 50, 50);
			event.dataTransfer.setData("text", draggedElement.outerHTML);
		}

		function drop(event) {
			event.preventDefault();
			var data = event.dataTransfer.getData("text");
			var dropArea = event.target;

			if (dropArea.id === 'dropArea') {
				dropArea.innerHTML = data;
			}
		}
	</script>

</body>

</html>